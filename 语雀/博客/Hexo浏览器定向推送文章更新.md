---
title: Hexoæµè§ˆå™¨å®šå‘æ¨é€æ–‡ç« æ›´æ–°
urlname: '37'
date: '<font style="color:rgb(38, 38, 38);">2022-10-05 00:00:00</font>'
updated: '<font style="color:rgb(38, 38, 38);">2023-08-29 13:05:00</font>'
author: CCåº·çº³ç™¾å·
cover: 'https://pic1.afdiancdn.com/user/8a7f563c2e3811ecab5852540025c377/common/d2a947d48815ed24936a919873b97841_w1366_h768_s31.png'
tags:
  - åšå®¢
  - å·¥å…·
description: '<font style="color:rgb(38, 38, 38);">è¿™ä¸€æ¬¡ï¼ŒCCçš„éƒ¨è½æ ¼å¯ä»¥æ ¹æ®è¯»è€…è®¢é˜…ä¸»é¢˜å®šå‘æ¨é€äº†ï¼Œå¹¶ä¸”å®ç°äº†NPMæ’ä»¶åŒ–</font>'
translate_title: hexo-webpushr-notification
subtitle: Hexo Webpushr Notification
keywords: '<font style="color:rgb(38, 38, 38);">[åšå®¢, å·¥å…·, hexo, web push, webpushr]</font>'
categories: åšå®¢
'<font style="color:rgb(64, 64, 64);">id</font>': '<font style="color:rgb(64, 64, 64);">37</font>'
---
æŸ¥çœ‹æœ¬æ–‡[**è¯­é›€**](https://www.yuque.com/ccknbc/blog/37/)ç‰ˆæœ¬ã€é¦–å‘ã€‘ï¼Œè‡ªåŠ¨åŒæ­¥æ›´æ–°è‡³[**CCçš„éƒ¨è½æ ¼**](https://blog.ccknbc.cc/posts/hexo-webpushr-notification/)ï¼



ä¸¤å¹´å‰ï¼Œæˆ‘åˆšå¼€å§‹ä½¿ç”¨`Hexo`çš„æ—¶å€™ï¼Œå†™äº†ä¸€ç¯‡æ–‡ç« [ç®€å•æµè§ˆå™¨æ›´æ–°æ¨é€çš„å®ç°](https://blog.ccknbc.cc/posts/implementation-of-simple-browser-update-push/)ï¼Œæœ€è¿‘ç™»å½•[webpushr](https://www.webpushr.com/)æ§åˆ¶å°ï¼Œå‘ç°å…¶æ”¯æŒæŒ‰è¯é¢˜`topic`æŒ‡å®šæ¨é€äº†ï¼Œè€ŒåŸæ¥çš„æ’ä»¶ä¸€ç›´æ²¡æœ‰æ›´æ–°ï¼Œä¸”å¯¹ä¸ªäººçš„å†™ä½œä¹ æƒ¯ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæ‰€ä»¥å¯¹åŸæ’ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œå¹¶å‘å¸ƒåˆ°äº†`NPM`



æ¬¢è¿å¤§å®¶å‰å¾€[è®¢é˜…é¡µé¢](/sub)é€‰æ‹©åˆé€‚çš„è®¢é˜…æ–¹å¼ï¼Œå…³äºé‚®ä»¶è®¢é˜…ï¼Œç°å·²æ”¯æŒåˆ†ç±»è®¢é˜…

## å®‰è£…


æ¨èä½¿ç”¨ `npm` ä»¥æ’ä»¶å½¢å¼å®‰è£…



```bash
npm i hexo-webpushr-notification
```

### è‡ªå®šä¹‰ä¿®æ”¹


å½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹[webpushr.js](https://github.com/Rock-Candy-Tea/hexo-webpushr-notification/blob/main/webpushr.js)æ–‡ä»¶åï¼Œå†å®‰è£…ç›¸å…³éœ€è¦ä¾èµ–ï¼Œç„¶åå°†æ–‡ä»¶æ”¾åˆ°`Hexo/scripts/`ç›®å½•ä¸‹å³å¯æ­£å¸¸è¿è¡Œï¼ŒCCæœ¬äººäº¦æ˜¯å¦‚æ­¤

å¯¹äº 0.2.0 ä»¥ä¸Šç‰ˆæœ¬ï¼Œæ‚¨åªéœ€è¦åœ¨ Hexo æ‰€åœ¨ç›®å½•å®‰è£… axios å³å¯ï¼Œè¿™æ ·æµ‹è¯•ç›¸è¾ƒäºå®‰è£… GitHub æ›´æ–¹ä¾¿ï¼ˆä»¥åŠæ¬¢è¿ PR ï¼‰

```bash
npm i axios
```

## ä½¿ç”¨
  
åœ¨ä½ çš„ Hexo æ ¹ç›®å½•é…ç½®æ–‡ä»¶ `_config.yml`ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œå¯æŒ‰éœ€é…ç½®ï¼Œå»ºè®®å‰å¾€ [README](https://github.com/Rock-Candy-Tea/hexo-webpushr-notification#readme) æŸ¥çœ‹æœ€æ–°é…ç½®



```yaml
webpushr:
  enable: true

  webpushrKey: "webpushrKey"
  webpushrAuthToken: "webpushrAuthToken"
  # å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå»ºè®®å°†ä¸Šè¿°ä¸¤ä¸ªé‡è¦å‚æ•°æ·»åŠ è‡³ç³»ç»Ÿå…¨å±€ç¯å¢ƒå˜é‡ï¼Œå¹¶åˆ é™¤æˆ–æ³¨é‡Šæ‰æ­¤å¤„é…ç½®
  # å¦åˆ™å¯åœ¨ç½‘é¡µç«¯å‘è®¿é—®è€…æˆ–è®¢é˜…ç”¨æˆ·å‘é€æ¨é€ https://www.webpushr.com/api-playground
  # ä¾‹å¦‚GitHub Actionsç¯å¢ƒå˜é‡é…ç½®ï¼Œå‚æ•°åä¸å˜ï¼Œå¯†é’¥åè‡ªå®šä¹‰ï¼Œå¯å‚è€ƒå¦‚ä¸‹
  # env:
  #     webpushrKey: ${{ secrets.WEBPUSHR_KEY }}
  #     webpushrAuthToken: ${{ secrets.WEBPUSHR_AUTH_TOKEN }}
  # å¦‚æœæ‚¨çš„ä»“åº“ç§æœ‰ï¼Œåˆ™æ— éœ€æ‹…å¿ƒæ­¤é—®é¢˜

  trackingCode: "trackingCode"
  icon: "https://.../192.png" # å¿…é¡»ä¸º HTTPS ä»¥åŠ 192*192 pngå›¾ç‰‡
  # auto_hide: false # é»˜è®¤ä¸º 1ï¼Œä»£è¡¨trueï¼Œå³è‡ªåŠ¨éšè—
  # sort: "date" # é»˜è®¤ä¸ºupdatedï¼Œå³åªè¦æœ€æ–°æ–‡ç« æ›´æ”¹äº†æ›´æ–°æ—¶é—´å³æ¨é€æ–°æ–‡ç« ï¼Œæ”¹ä¸ºdateå³æ–‡ç« ç¬¬ä¸€æ¬¡å‘å¸ƒæ—¶é—´
  # delay: "0" # å»¶æ—¶æ¨é€ï¼Œè€ƒè™‘åˆ°CDNç¼“å­˜æ›´æ–°ï¼Œé»˜è®¤å®šæ—¶ä¸ºåœ¨ hexo d 10åˆ†é’Ÿåæ¨é€ï¼Œå•ä½ä¸ºåˆ†é’Ÿï¼ˆæœ€çŸ­å»¶æ—¶ä¸º5åˆ†é’Ÿï¼Œè®¾ç½® 0 åˆ™ä¼šç«‹å³æ¨é€ï¼‰
  # expire: "15d" # æ¨é€è¿‡æœŸæ—¶é•¿ï¼Œé»˜è®¤å€¼ä¸º7å¤©ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š'5m'ä»£è¡¨5åˆ†é’Ÿ,'5h'ä»£è¡¨5å°æ—¶, '5d'ä»£è¡¨5å¤©.
  # image: # é»˜è®¤ä¸ºæ–‡ç« å°é¢ï¼ŒFront-matter å±æ€§ä¸º'cover'(butterflyä¸»é¢˜å‹å¥½é€‰é¡¹)ï¼Œå¦‚æœæ‚¨æ²¡æœ‰å®šä¹‰é»˜è®¤å°é¢æˆ–æ­¤å±æ€§ï¼Œè¯·åœ¨è¿™é‡Œè®¾ç½®é»˜è®¤image
  action_buttons: # å¦‚æœä½ éœ€è¦é¢å¤–è‡ªå®šä¹‰æŒ‰é’® å¯æŒ‰ç…§å¦‚ä¸‹æ ¼å¼ï¼š
    - title: é˜…è¯»å…¨æ–‡ # å½“ title æœªé…ç½®æ—¶ é»˜è®¤å€¼ä¸º â€œå‰å¾€æŸ¥çœ‹â€
      # url:  # å½“ url æœªé…ç½®æ—¶ é»˜è®¤å€¼ä¸º æœ€æ–°æ–‡ç« é“¾æ¥
    - title: è®¢é˜…é¡µé¢
      url: https://blog.ccknbc.cc/sub/
    # å½“ action_buttons æœªå®šä¹‰æ—¶ä¹Ÿé»˜è®¤ä¿ç•™äº†ä¸€ä¸ªâ€œå‰å¾€æŸ¥çœ‹â€æŒ‰é’®ï¼Œé™¤éè®¾ç½®ä¸º false
    # action_buttons: false # å½“è®¾ä¸º false åˆ™ä¸æ˜¾ç¤ºé¢å¤–çš„æŒ‰é’®ï¼Œå› ä¸ºéšè—æŒ‰é’®å³ä¸ºå½“å‰æ–‡ç« é“¾æ¥

  # ä»¥ä¸‹é…ç½®ä¸ºæŒ‰è®¢é˜…ä¸»é¢˜æ¨é€ç»™ä¸åŒè®¢é˜…ç”¨æˆ·ï¼Œè¯·æŒ‰ç…§æ•°ç»„å½¢å¼ï¼Œä¸€ä¸€å¯¹åº”ï¼Œå…·ä½“ä½ç½®è¯·çœ‹ä½¿ç”¨æ–‡æ¡£
  categories: [å·¥ä½œ, åšå®¢, å·¥å…·, ç”Ÿæ´», éŸ³ä¹, å­¦ä¹ ]
  segment: ["484223", "484224", "484225", "484226", "484227", "484229"]
  endpoint: segment # å¯é€‰é…ç½® all / segment / sid
  # é»˜è®¤ä¸º segmentï¼Œå³æ ¹æ®ä¸åŒä¸»é¢˜æ¨é€ç»†åˆ†ï¼ŒåŒæ—¶é…ç½®ä¸Šè¿°é€‰é¡¹
  # ä¾‹å¦‚ allï¼Œå³æ¨é€è‡³æ‰€æœ‰ç”¨æˆ·ï¼›é’ˆå¯¹æœ¬åœ°æµ‹è¯•ï¼Œå»ºè®®åªæ¨é€ç»™å•ä¸ªç”¨æˆ·å³è‡ªå·±ï¼ŒåŒæ—¶è®¾ç½®ä¸‹æ–¹çš„ sid å€¼
  # æ‚¨ä¹Ÿå¯ä»¥å°†segment è®¾ç½®ä¸º all-users å¯¹åº”çš„IDï¼ŒåŒæ ·ä¹Ÿå¯ä»¥å®ç°æ¨é€è‡³æ‰€æœ‰ç”¨æˆ·
  sid: "119810055" # å•ä¸ªç”¨æˆ·ID å¯åœ¨æ§åˆ¶å°æŸ¥çœ‹ https://app.webpushr.com/subscribers

  # æ­¤å¤–ï¼Œåœ¨æ–‡ç«  Front-Matter å¤„
  # å¯è¦†ç›– auto_hide å’Œ expire é…ç½®ï¼Œé’ˆå¯¹éœ€è¦ç‰¹åˆ«æé†’æ–‡ç« å¯ä»¥è®¾ç½®ä¸è‡ªåŠ¨éšè—åŠè¿‡æœŸæ—¶é—´å»¶é•¿ç­‰æ“ä½œ
  # ä»¥åŠå¯æŒ‡å®šscheduleå‚æ•°ï¼ˆä¾‹å¦‚ï¼šschedule: 2022-10-01 00:00:00ï¼‰ï¼Œå®šæ—¶æ¨é€
  # å½“æ–‡ç« å¤´è®¾ç½® webpushr: false æ—¶ï¼Œå¯å…³é—­æœ¬ç¯‡æ–‡ç« æ¨é€ï¼Œæ­¤å‚æ•°ä¸»è¦é˜²æ­¢ä¹…è¿œæ–‡ç« æ›´æ”¹æ›´æ–°æ—¶é—´åè‡ªåŠ¨æ¨é€
```



1. å‰å¾€ webpushr æ§åˆ¶å°è·å–å¦‚ä¸‹å‚æ•°ï¼Œæ³¨å†Œçš„æ—¶å€™å¯èƒ½ä¼šé‡åˆ°ä¸€ç‚¹å›°éš¾ï¼Œä¸­å›½å¤§é™†ç”¨æˆ·éœ€è¦ç§‘å­¦ä¸Šç½‘æ¥åŠ è½½éªŒè¯æœåŠ¡ï¼‰
2. å…³äºæ³¨å†ŒåŠä¸€äº›å…·ä½“å†…å®¹ï¼Œå¯ä»¥çœ‹ä¹‹å‰çš„æ–‡ç«  [ç®€å•æµè§ˆå™¨æ›´æ–°æ¨é€çš„å®ç°](https://blog.ccknbc.cc/posts/implementation-of-simple-browser-update-push/)
3. ä¾æ¬¡ç‚¹å‡» `Integration` > `REST API Keys`ï¼Œå³å¯çœ‹åˆ°ä½ çš„`webpushrKey` åŠ `webpushrAuthToken`
4. ä¾æ¬¡ç‚¹å‡» `Setup` > `TrackingCode`ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä»£ç 



```javascript
<!-- start webpushr tracking code -->
  <script>(function(w,d, s, id) {if(typeof(w.webpushr)!=='undefined') return;w.webpushr=w.webpushr||function(){(w.webpushr.q=w.webpushr.q||[]).push(arguments)};var js, fjs = d.getElementsByTagName(s)[0];js = d.createElement(s); js.id = id;js.async=1;js.src = "https://cdn.webpushr.com/app.min.js";
                                 fjs.parentNode.appendChild(js);}(window,document, 'script', 'webpushr-jssdk'));
webpushr('setup',{'key':'BKOlpbdgvBCWXqXI6PtsUzobY7TLV9gwJU8bzMktrwfrSERg_xnLvbjpdw8x2GmFmi1ZcLTz0ni6OnX5MAwoM58' });</script>
  <!-- end webpushr tracking code -->
```



æœ€åä¸€è¡Œ`BKOlpbdgvBCWXqXI6PtsUzobY7TLV9gwJU8bzMktrwfrSERg_xnLvbjpdw8x2GmFmi1ZcLTz0ni6OnX5MAwoM58` å°±æ˜¯ä½ çš„ `trackingCode`



**æ³¨æ„**ï¼šå› æƒé™é—®é¢˜ï¼Œæœ¬åœ°æµ‹è¯•æ—¶(`hexo s`)å¯èƒ½ä¸ä¼šæ˜¾ç¤ºå¼¹çª—ï¼Œä½†å¦‚æœä½ é…ç½®äº†å°é“ƒé“›ï¼Œå°é“ƒé“›ä¼šæ˜¾ç¤º



## é¢å¤–é…ç½®


å› å®˜æ–¹swè„šæœ¬æ³¨å†Œåï¼Œæˆ‘ä»¬æ— æ³•æ³¨å†Œè‡ªå·±çš„swè„šæœ¬ï¼Œä½†å®˜æ–¹æä¾›äº†é…ç½®ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨swçš„ç¼“å­˜ï¼Œæ‹¦æˆªè¯·æ±‚ç­‰åŠŸèƒ½



é¦–å…ˆåœ¨é…ç½®é¡¹ä¸­æ·»åŠ  `sw_self: true `é…ç½®ï¼Œå¼€å¯è‡ªè¡Œæ³¨å†Œswï¼ˆé»˜è®¤ç”¨æˆ·ä¸ç”¨æ·»åŠ æˆ–è€…è®¾ä¸º `false`ï¼‰

```yaml
webpushr:
  sw_self: true
```

å¦å¤–ï¼Œä½ è¿˜éœ€è¦åœ¨ä½ çš„è„šæœ¬æ–‡ä»¶ï¼ˆä¾‹å¦‚`sw.js`ï¼‰ä¸­å¼•å…¥

```javascript
importScripts('https://cdn.webpushr.com/sw-server.min.js');
```

å®Œæˆè¿™äº›ä½ å°±å¯ä»¥è‡ªè¡Œæ³¨å†Œä½ çš„`sw`è„šæœ¬äº†ï¼Œå¦‚æœä½ éœ€è¦äº†è§£å¦‚ä½•ç¼–å†™æˆ–æ³¨å†Œ`service worker`è„šæœ¬ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æ–‡ç« æˆ–é¡¹ç›®

[hexo-swpp](https://kmar.top/posts/73014407/)  

[Service Worker](https://blog.cyfan.top/p/c0af86bb.html)  

[clientworker](https://clientworker.js.org/)  

[Workbox](https://github.com/GoogleChrome/workbox)  

## è‡ªå®šä¹‰


ä¸ªäººå»ºè®®å°†æ§åˆ¶å°å³ä¸Šè§’å°é“ƒé“›ğŸ””é‡Œå…¨éƒ¨é…ç½®ä¸€éä»¥è·å¾—æ›´å¥½çš„æ•ˆæœ



ä½ éœ€è¦è‡ªå®šä¹‰ä¸€äº›å‚æ•°æ‰å¯ä»¥ä½¿ç”¨æ ¹æ®ä¸åŒä¸»é¢˜ï¼ŒæŒ‰ç…§è®¢é˜…è€…è®¢é˜…è¯é¢˜æ¨é€åŠŸèƒ½ï¼ˆç›®å‰æ ¹æ®ä¸ªäººéœ€æ±‚æ˜¯è¿™ä¸ªè®¾ç½®ï¼Œé»˜è®¤è¡Œä¸ºä¸ºå½“æœªåŒ¹é…åˆ°å¯¹åº”åˆ†ç±»æ—¶ä¸æ¨é€æ–‡ç« ï¼Œè€Œä¸æ˜¯å‘æ‰€æœ‰ç”¨æˆ·æ¨é€æ–‡ç« ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é…ç½®ç›®æ ‡ä¸ºæ‰€æœ‰ç”¨æˆ·ï¼‰



åœ¨æ§åˆ¶å°ï¼Œç‚¹å‡»`Setup`>`Opt-In Prompt` ï¼Œå‘ä¸‹æ»‘åŠ¨æ‰“å¼€`Enable Topics`ï¼ˆå°é“ƒé“›æ ·å¼æ— æ­¤é€‰é¡¹ï¼Œå› æ­¤æ¨èæ‚¨ä½¿ç”¨å‰ä¸¤ç§æ ·å¼ï¼‰ï¼Œå¹¶æ–°å¢å‡ ä¸ªä¸»é¢˜ï¼Œå¯¹åº”ä½ æƒ³æ¨é€çš„æ–‡ç« åˆ†ç±»å³å¯



ç„¶åç‚¹å‡»`Users`>`Segments` ï¼Œå³å¯è·å–å¯¹åº”çš„`segment`å…³ç³»ï¼Œä¾æ¬¡å¡«å…¥é…ç½®é¡¹å³å¯

## å·¥ä½œåŸç†


å½“ä½ è¿è¡Œ`hexo generate`æ’ä»¶ä¼šåœ¨`public` ç›®å½•ç”Ÿæˆ `newPost.json` è¿™æ ·ä¸€ä¸ªæ–‡ä»¶. `newPost.json` åŒ…å«äº†ä¸€äº›ä½ æƒ³æ¨é€çš„æ–°æ–‡ç« ç›¸å…³ä¿¡æ¯ï¼Œç¤ºä¾‹æ ¼å¼å¦‚ä¸‹



```json
{
  "title": "Hexoæµè§ˆå™¨å®šå‘æ¨é€æ–‡ç« æ›´æ–°",
  "updated": "2023-04-22T20:25:00+08:00",
  "message": "è¿™ä¸€æ¬¡ï¼ŒCCçš„éƒ¨è½æ ¼å¯ä»¥æ ¹æ®è¯»è€…è®¢é˜…ä¸»é¢˜å®šå‘æ¨é€äº†ï¼Œå¹¶ä¸”å®ç°äº†NPMæ’ä»¶åŒ–",
  "target_url": "https://blog.ccknbc.cc/posts/hexo-webpushr-notification/",
  "image": "https://pic1.afdiancdn.com/user/8a7f563c2e3811ecab5852540025c377/common/d2a947d48815ed24936a919873b97841_w1366_h768_s31.png",
  "categories": [
    "åšå®¢"
  ],
  "schedule": "2023-06-13T15:16:41.187Z",
  "expire": "7d",
  "auto_hide": "1"
}
```



è€Œä»–çš„æ¥æºå°±æ˜¯æˆ‘ä»¬åœ¨æ–‡ç« å¼€å¤´`Front-Matter`è‡ªå®šä¹‰çš„é‚£äº›å±æ€§ï¼Œè€Œæœ¬æ’ä»¶é’ˆå¯¹`Butterfly`ä¸»é¢˜åšäº†é’ˆå¯¹æ€§ä¿®æ”¹ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨æ‚¨çš„æ¨¡æ¿æ–‡ä»¶ç›®å½•ä¸‹ä¿®æ”¹æ–‡ç« æ¨¡æ¿æ–‡ä»¶(`Hexo/scaffolds/post.md`)ï¼Œä¸»è¦é’ˆå¯¹æ€§å‚æ•°å¦‚ä¸‹



```yaml
date: 
updated: 
schedule: å¯¹åº”é…ç½®é¡¹ä¸­å®šæ—¶æ¨é€æ—¶é—´
auto_hide: å¯¹åº”é…ç½®é¡¹ä¸­æ˜¯å¦è‡ªåŠ¨éšè—
expire: å¯¹åº”é…ç½®é¡¹ä¸­è¿‡æœŸæ—¶é—´
categories: æ–‡ç« åˆ†ç±»
description: å¯¹åº”é…ç½®é¡¹ä¸­messageï¼Œå³æ–‡ç« æè¿°
cover: å¯¹åº”é…ç½®é¡¹ä¸­imageï¼Œé»˜è®¤é€‰å–æ–‡ç« å°é¢
```



å¦‚æœä½ çš„ä¸»é¢˜ä¸æ˜¯é‡‡ç”¨é»˜è®¤çš„`date` `updated` å‚æ•°ï¼Œè®°å¾—è¡¥å……ï¼Œå› ä¸ºè¿™æ˜¯åˆ¤æ–­æœ€æ–°æ–‡ç« çš„ä¾æ®



å¦‚æœä½ ä¹ æƒ¯äº†ä½¿ç”¨æˆªæ–­çš„æ–¹å¼ï¼Œä¹Ÿæ— éœ€é…ç½®`description`ç»§ç»­ä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼Œæ³¨æ„`<!-- more -->`



```markdown
---
title: Hexoä½¿ç”¨Web Push Notification æµè§ˆå™¨é€šçŸ¥æ¨é€
tags:
  - hexo
  - æœåŠ¡å™¨æ¨é€æŠ€æœ¯
  - push notifications
categories:
  - å¼€å‘
comments: true
abbrlink: 98ae9e55
date: 2020-02-26 10:00:00
---

Web Push Notification æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿä¸ªäººåšå®¢ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿå¦‚ä½•ä½¿ç”¨å®ƒï¼Ÿ

<!-- more -->
```



å½“æ‰§è¡Œ `hexo deploy`å‘½ä»¤æ—¶ï¼Œæ’ä»¶ä¼šæ¯”è¾ƒåœ¨çº¿ç‰ˆæœ¬å’Œæœ¬åœ°ç‰ˆæœ¬`newPost.json`ä¸­æœ€æ–°æ–‡ç« æ›´æ–°æ—¶é—´æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸åŒï¼Œåˆ™æ’ä»¶å°†æ¨é€æœ€æ–°æ–‡ç« æ›´æ–°é€šçŸ¥ï¼ˆé»˜è®¤ä¸ºååˆ†é’Ÿåæ¨é€ï¼‰



**æ³¨æ„**ï¼šå¦‚æœæ‚¨æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨æœ¬åœ°æµ‹è¯•åº”è¯¥çœ‹åˆ°



```bash
INFO  æ— æ–‡ç« æ›´æ–° æˆ– ä¸ºé¦–æ¬¡æ¨é€æ›´æ–°
```



è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œå› ä¸ºæ­¤æ—¶ä½ çš„ç½‘ç«™è¿˜æ²¡æœ‰`newPost.json`è¿™ä¸ªæ–‡ä»¶ï¼Œåç»­æœ‰æ›´æ–°æ—¶å°†æ­£å¸¸æ¨é€ï¼Œä½ å¯ä»¥å…ˆæ¨é€ä¸€æ¬¡ï¼Œå†ä¿®æ”¹æ›´æ–°æ—¶é—´æµ‹è¯•ä¸€æ¬¡ï¼Œå½“ç„¶å»ºè®®æµ‹è¯•ç›®æ ‡é€‰æ‹©è‡ªå·±ï¼Œå³sidé€‰é¡¹é…ç½®



å½“ç„¶å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰ä»€ä¹ˆé—®é¢˜æˆ–é‡åˆ°äº†Bugä¹Ÿæ¬¢è¿éšæ—¶åœ¨è¯„è®ºåŒºæˆ–[issues](https://github.com/Rock-Candy-Tea/hexo-webpushr-notification/issues)åé¦ˆï¼Œå½“ç„¶å› ä¸ºæœ¬äººæ˜¯èœé¸¡ï¼Œæ‰€ä»¥æœ‰å¤§ä½¬PRæœ€å¥½äº†

## æ¨é€æ•ˆæœ
å› ä¸ºæˆ‘æ˜¯é€šçŸ¥è‡ªåŠ¨éšè—åæ‰æˆªå›¾ï¼Œæ‰€ä»¥å¤§è‡´æ•ˆæœå¦‚ä¸‹æ‰€ç¤º

![](https://cdn.nlark.com/yuque/0/2022/png/8391407/1664951686275-f37cb76d-34f6-40ed-94c6-9bed130d0605.png)

## åç»­è®¡åˆ’
- [x] å…¼å®¹è‡ªå®šä¹‰`Service Work`çš„åŠŸèƒ½ï¼Œå› ä¸º`webpushr-sw.js`ä¼˜å…ˆæ³¨å†Œçš„åŸå› ï¼Œåªèƒ½æœ‰ä¸€ä¸ª `sw`æ³¨å†Œï¼Œæ— æ³•æ³¨å†Œè‡ªå·±ç¼–å†™è„šæœ¬ã€‚
- [x] æ”¯æŒå‚æ•°æ›´å¤šçš„å¯è‡ªå®šä¹‰ï¼Œå¯ç”¨æˆ–å…³é—­ã€‚ä¾‹å¦‚ä¸å»¶æ—¶ï¼Œç«‹å³å‘é€ï¼›ä¸æ˜¾ç¤ºæŒ‰é’®ï¼ˆå› ä¸ºé»˜è®¤å°±æ˜¯è·³è½¬åˆ°æ–‡ç« ï¼‰ç­‰
- [x] ç›®å‰çš„åˆ¤æ–­é€»è¾‘ï¼Œè™½ç„¶å¯ä»¥æ ¹æ®æ›´æ–°æ—¶é—´æ¥åˆ¤æ–­ï¼Œä½†å¦‚æœå¾ˆä¹…ä¹‹å‰çš„æ–‡ç« ç¿»æ–°ï¼Œåªè¦æ›´æ–°æ—¶é—´æœ€æ–°ï¼Œä¹Ÿä¼šè§¦å‘æ¨é€ï¼Œä¸»è¦é’ˆå¯¹ updated æ–¹å¼ï¼Œè¿˜æ²¡æƒ³åˆ°å¥½çš„è§£å†³åŠæ³•ï¼Œç›®å‰å°±æ˜¯ç¡®è®¤éœ€è¦æ¨é€æ‰æ›´æ”¹æ›´æ–°æ—¶é—´å’¯
- [ ] ä¼˜åŒ–ä»£ç ï¼Œå‡å°‘ä»£ç é‡

